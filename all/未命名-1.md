```mermaid
flowchart TD
    subgraph "主流程"
        A[开始] --> B[初始化\nx1=3, x2=3\nλ=[0,0,0], μ=0\nr=1, c=0.2, ε=5e-5]
        B --> C[outer_iter=0]
        C --> D[保存x1_old, x2_old]
        D --> E[调用内层优化]
        E --> F[计算diff_norm=|Δx|]
        F --> G[更新λ, μ乘子]
        G --> H[r = r*c]
        H --> I[outer_iter++ ]
        I --> J[打印迭代信息]
        J --> K{diff_norm>ε 且 iter<1000?}
        K -- 是 --> D
        K -- 否 --> L[打印最终结果]
        L --> M[结束]
    end
    
    subgraph "内层优化"
        E --> N[step_size=0.1, iter=0]
        N --> O{iter<max_iter?}
        O -- 是 --> P[计算梯度grad]
        P --> Q[grad_norm=|grad|]
        Q --> R{grad_norm<inner_tol?}
        R -- 是 --> Y[内层结束]
        R -- 否 --> S[计算x1_new, x2_new]
        S --> T[投影到[0,6]×[0,8]]
        T --> U[计算obj_old, obj_new]
        U --> V{obj_new<obj_old?}
        V -- 是 --> W[更新x1,x2, step_size×1.2]
        V -- 否 --> X[step_size×0.5, 检查步长]
        W --> Z[step_size=min(step_size,1.0)]
        X --> A1{step_size<1e-10?}
        A1 -- 是 --> Y
        A1 -- 否 --> S
        Z --> A2[iter++ ]
        A2 --> O
        O -- 否 --> Y
    end
```